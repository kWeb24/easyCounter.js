/*!
* @license easyCounterJS
* Visit [https://github.com/kWeb24/easyCounter.js] for documentation, updates and examples.
* Version 0.3.0
*
* Copyright (c) 2017 kamilweber.pl
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
!function(t,e,i,s){"use strict";var a="easyCounter",n="0.3.0",r={duration:1e3,delay:0,decimals:0,kilosepa:!1,runonce:!1,disableoverride:!1,autorun:!0,direction:"asc",attrmin:"ec-min",attrmax:"ec-max",attrdecimals:"ec-decimals",attrkilosepa:"ec-kilosepa",attrduration:"ec-duration",attrdelay:"ec-delay",attrdirection:"ec-direction",attrrunonce:"ec-run-once",attrdisableoverride:"ec-disable-override",attrautorun:"ec-auto-run"};function o(e,i){this._name=a,this._version=n,this._defaults=r,this.element=e,this.options=i,this.settings=t.extend({},r,i),this.defaultText=t(this.element).text(),this.keyValues={min:0,max:0,isVisible:!1,isFloat:!1,isExecuted:!1,isExecuting:!1,autorun:this.settings.autorun,disableOverride:this.settings.disableoverride,runonce:this.settings.runonce,decimals:this.settings.decimals,kilosepa:this.settings.kilosepa,duration:this.settings.duration,delay:this.settings.delay,direction:this.settings.direction},this.init(),this.clearValues()}function u(t){return!!t.data("plugin_easyCounter")||(console.error("%cError: easyCounter.js [fire] -> Given element does not have easyCounter.js attached to it. Initialize first.","background: #c0392b; color: white;"),!1)}t.extend(o.prototype,{init:function(){var s=this.element,a=this;this.checkAttributes(s),t(i).ready(function(){a.isOnScreen(s)}),t(e).scroll(function(){a.isOnScreen(s)}),t(e).on("ec-element-enter-screen",{},function(t,e){e===a.element&&a.shouldRun()&&(a.keyValues.isExecuting=!0,a.countUp(e,a))})},checkAttributes:function(e){var i={min:t(e).attr(this.settings.attrmin),max:t(e).attr(this.settings.attrmax),decimals:t(e).attr(this.settings.attrdecimals),duration:t(e).attr(this.settings.attrduration),delay:t(e).attr(this.settings.attrdelay),direction:t(e).attr(this.settings.attrdirection),runonce:t(e).attr(this.settings.attrrunonce),autorun:t(e).attr(this.settings.attrautorun),kilosepa:t(e).attr(this.settings.attrkilosepa)};for(var a in i)if(typeof i[a]!=typeof s&&!1!==i[a])this.keyValues[a]=this.validate(i[a],a);else{if("min"==a||"max"==a)return this.throwError("init.checkAttributes","attr"+a+" attribute not found"),!1;"decimals"==a&&typeof this.options.decimals==typeof s?(this.keyValues.min=this.setValueAttributes(i.min),this.keyValues.max=this.setValueAttributes(i.max)):this.keyValues[a]=this.validate(this.settings[a],a)}},validate:function(e,i){var s=e.toString().replace(" ","").replace(",",".");if("direction"==i&&"asc"!=e&&"desc"!=e)return this.throwError("init.validate","attr"+i+" must be ASC or DESC"),!1;if(!t.isNumeric(s)&&"direction"!=i&&"runonce"!=i&&"autorun"!=i&&"kilosepa"!=i)return this.throwError("init.validate","attr"+i+" is not numeric"),!1;if("runonce"==i||"disableoverride"==i||"autorun"==i){var a=null;if("true"!=e&&"1"!=e||(a=!0),"false"!=e&&"0"!=e||(a=!1),!0!==a&&!1!==a)return this.throwError("init.validate","attr"+i+" must be true or false"),!1;s=a}return"min"!=i&&"max"!=i||this.setValueAttributes(s),"kilosepa"==i&&(s=e),s},setValueAttributes:function(t){if(Math.floor(t)!=t){this.keyValues.isFloat=!0;var e=(t.split(".")[1]||[]).length;e>this.keyValues.decimals&&(this.keyValues.decimals=e)}return t},isOnScreen:function(i){var s=t(e),a={top:t(i).offset().top,bottom:t(i).offset().bottom,right:t(i).offset().right,left:t(i).offset().left},n={top:s.scrollTop(),left:s.scrollLeft()};n.right=n.left+s.width(),n.bottom=n.top+s.height(),a.right=a.left+t(i).outerWidth(),a.bottom=a.top+t(i).outerHeight();var r=!(n.right<a.left||n.left>a.right||n.bottom<a.top||n.top>a.bottom);return r?this.keyValues.isVisible||(t(e).trigger("ec-element-enter-screen",[i]),this.keyValues.isVisible=!0):this.keyValues.isVisible&&(t(e).trigger("ec-element-leave-screen",[i]),this.keyValues.isVisible=!1),r},countUp:function(i,s){var a=s.keyValues.isFloat?parseFloat(s.keyValues.min):parseInt(s.keyValues.min),n=s.keyValues.isFloat?parseFloat(s.keyValues.max):parseInt(s.keyValues.max),r=s.keyValues.delay;if("desc"==s.keyValues.direction){var o=a;a=n,n=o}setTimeout(function(){t({countNum:a}).stop(!0,!0).animate({countNum:n},{duration:parseInt(s.keyValues.duration),easing:"linear",start:function(){t(e).trigger("ec-animation-start",[i]),s.keyValues.isExecuting=!0},step:function(){s.keyValues.isFloat?t(i).text(s.thousandsSeparator(this.countNum.toFixed(s.keyValues.decimals),s)):t(i).text(s.thousandsSeparator(Math.floor(this.countNum),s))},complete:function(){s.keyValues.isFloat?t(i).text(s.thousandsSeparator(this.countNum.toFixed(s.keyValues.decimals),s)):t(i).text(s.thousandsSeparator(Math.floor(this.countNum),s))},done:function(){t(e).trigger("ec-animation-end",[i]),s.keyValues.isExecuting=!1,s.keyValues.isExecuted=!0}})},r)},thousandsSeparator:function(t,e){if(e.keyValues.kilosepa&&"false"!=e.keyValues.kilosepa){var i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,e.keyValues.kilosepa),i.join(".")}return t},shouldRun:function(){return!(this.keyValues.isExecuting||!this.keyValues.autorun||(!this.keyValues.runonce||this.keyValues.isExecuted)&&this.keyValues.runonce)},clearValues:function(){var e="asc"==this.keyValues.direction?this.keyValues.min:this.keyValues.max;t(this.element).text().length>0&&t(this.element).text(this.defaultText),this.keyValues.disableOverride||t(this.element).text()||t(this.element).text(e),this.keyValues.disableOverride&&!t(this.element).text()&&t(this.element).text("&nbsp;")},fire:function(t){t!==this.element||this.keyValues.isExecuting||(this.keyValues.isExecuting=!0,this.countUp(t,this))},throwError:function(t,e){console.error("%cError: easyCounter.js ["+t+"] -> "+e,"background: #c0392b; color: white;")},throwWarning:function(t,e){console.error("%cWarning: easyCounter.js ["+t+"] -> "+e,"background: #d35400; color: white;")}}),t.fn[a]=function(e){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new o(this,e))})},t.fn.ecfire=function(){u(this)&&this.data("plugin_easyCounter").fire(this[0])},t.fn.ecclear=function(){u(this)&&this.data("plugin_easyCounter").clearValues()}}(jQuery,window,document);
